spring:
  application:
    name: patient-service
  profiles:
    active: dev
  datasource:
    url: jdbc:postgresql://localhost:5432/automed
    username: automed
    password: automed123
    driver-class-name: org.postgresql.Driver
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
  kafka:
    bootstrap-servers: localhost:9092
    producer:
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: org.springframework.kafka.support.serializer.JsonSerializer
  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: http://localhost:8080/realms/automed
  cloud:
    discovery:
      enabled: true
  data:
    mongodb:
      uri: mongodb://localhost:27017/automed_audit
  redis:
    host: localhost
    port: 6379
    password: automed123
    timeout: 2000ms

server:
  port: 8081

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: always

logging:
  level:
    com.automed: DEBUG
    org.springframework.security: DEBUG

# HIPAA/GDPR Security Configuration
app:
  security:
    cors:
      allowed-origins: "https://app.automed.com,https://admin.automed.com"
    encryption:
      key: "${ENCRYPTION_KEY:}"  # Should be set via environment variable
      algorithm: "AES/GCM/NoPadding"
    audit:
      enabled: true
      retention-days: 2555  # 7 years for medical records
    rate-limiting:
      enabled: true
      requests-per-minute: 100
      requests-per-hour: 1000
    compliance:
      hipaa-enabled: true
      gdpr-enabled: true
      data-retention-years: 7
    headers:
      hsts-max-age: 31536000
      csp-policy: "default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self' https://api.automed.com"
